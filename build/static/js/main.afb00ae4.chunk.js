(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],[,,,,,,,,,,,,,function(t,n){t.exports=function(t){return{name:t,attack:function(t,n){t.board.receiveAttack(n)}}}},,,,,,function(t,n,e){},function(t,n,e){},function(t,n,e){},function(t,n,e){},,,,,,,function(t,n,e){},function(t,n,e){},function(t,n,e){},function(t,n,e){},function(t,n,e){},function(t,n,e){},function(t,n,e){},function(t,n,e){},function(t,n,e){"use strict";e.r(n);var r=e(2),a=e.n(r),o=e(14),i=e.n(o),c=(e(19),e(20),e(4)),s=e(3),u=(e(21),e(22),e(11)),l=e(0);var d=function(t){var n=t.turn,e=t.opponent,r=t.winner,a=t.attackResult,o=a?a?"hit":"miss":"",i=(""!==o&&("Player"===n.name||n.name,e.name),r?Object(l.jsx)("div",{className:"banner",children:Object(l.jsxs)("h2",{children:[r.name," won"]})}):Object(l.jsx)("div",{className:"banner",children:Object(l.jsxs)("h2",{children:[n.name,"'s Turn"]})}));return Object(l.jsx)("div",{className:"game-ribbon",children:i})};e(29),e(30),e(31),e(32);var f=function(t){var n="",e=t.value,r=t.index,a=t.dragOver,o=t.dragEnter,i=t.dragLeave,c=t.dragDrop;return"miss"!==e&&"hit"!==e||(n=e),Object(l.jsx)("div",{className:"cell ".concat(n),"data-key":r,onDragOver:a,onDragEnter:o,onDragLeave:i,onDrop:c})};e(33);function h(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40,e=Math.floor(t/10),r=t%10;return{topOffset:e*=n,leftOffset:r*=n}}var p=function(t){var n=t.ship,e=n.positions,r=n.length,a=n.orientation,o=t.dragStart,i=t.dragEnd,c=e[0],s=e[r-1],u=function(t,n,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,a={position:"absolute"},o=h(t,r),i=o.topOffset,c=o.leftOffset;return a.top="".concat(i,"px"),a.left="".concat(c,"px"),"vertical"===n?(a.width="".concat(r,"px"),a.height="".concat(r*e,"px")):(a.height="".concat(r,"px"),a.width="".concat(r*e,"px")),a}(c,a,r);return Object(l.jsx)("div",{className:"ship ".concat(a),"data-ship":t.index,"data-length":r,"data-start":c,"data-end":s,style:u,draggable:"true",onDragStart:o,onDragEnd:i})};var v=function(t){var n=t.player,e=t.boardValues,r=t.ships,a=t.playRound,o=t.turn,i=t.dragFunctions,c=o!==n?"":"pause",s=e.map((function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(l.jsx)(f,{value:t,index:e,dragOver:i.dragOver,dragEnter:i.dragEnter,dragLeave:i.dragLeave,dragDrop:function(t){return i.dragDrop(t,n)}},e)})),u="Player"===n.name?r.map((function(t,n){return Object(l.jsx)(p,{index:n,ship:t,dragStart:i.dragStart,dragEnd:i.dragEnd},n)})):null;return Object(l.jsxs)("div",{className:"game-board ".concat(n.name," ").concat(c),onClick:a,children:[s,u]})},g=(e(34),e(8));e(35);e(36);function b(t,n,e){for(var r=[],a=e,o="vertical"===t?10:1,i=0;i<n;i++)r.push(a),a+=o;return r}for(var j=function(t,n,e){var r=Object(g.a)(n.classList).includes("horizontal")?"horizontal":"vertical",a=n.getAttribute("data-length");console.log(r,a);var o=parseInt(n.getAttribute("data-end")),i=b(r,a,o);console.log(o,i);var c=parseInt(e.getAttribute("data-key")),s=b(r,a,c);if(function(t,n,e,r,a,o){var i=n.every((function(n){return void 0===t[n]||e.includes(n)}));console.log(i);var c=!n.some((function(t){return t>99||t<0}));console.log(a,o),console.log(c);var s="horizontal"===r?Math.floor(a/10)===Math.floor(o/10):a%10===o%10;return console.log(s),i&&c&&s}(t.board,s,i,r,c,s[a-1])){console.log(c,s),function(t,n,e){t.setAttribute("data-start",n),t.setAttribute("data-end",e)}(n,s[0],c);var u=h(s[0]),l=u.topOffset,d=u.leftOffset;n.style.top="".concat(l,"px"),n.style.left="".concat(d,"px");var f=parseInt(n.getAttribute("data-ship"));t.board.updateShip(f,i,s)}},m=function(){var t;return{dragStart:function(n){console.log("start"),t=n.target,setTimeout((function(){return t.classList.add("hidden")}),0)},dragEnd:function(t){console.log("end"),t.target.classList.remove("hidden")},dragOver:function(t){console.log("over"),t.preventDefault()},dragEnter:function(t){console.log("enter"),t.target.classList.add("hovered")},dragLeave:function(t){console.log("leave"),t.target.className="cell"},dragDrop:function(n,e){console.log("drop"),n.preventDefault();var r=n.dataTransfer.getData("text");console.log(r);var a=n.target;a.className="cell",console.log(t,a),j(e,t,a)}}}(),O=[],x=0;x<10;x++)O.push(Object(l.jsx)("div",{className:"number",children:Object(l.jsx)("p",{children:x})},x));var k=function(t){var n=t.player,e=t.boardValues,r=t.ships,a=t.playRound,o=t.turn;return Object(l.jsxs)("div",{className:"gameboard-container",children:[Object(l.jsxs)("div",{className:"flex",children:[Object(l.jsx)("div",{className:"side-tab",children:O}),Object(l.jsxs)("div",{children:[Object(l.jsx)(v,{turn:o,player:n,boardValues:e,ships:r,playRound:a,dragFunctions:m}),Object(l.jsx)("div",{className:"bottom-tab",children:O})]})]}),Object(l.jsx)("div",{className:"board-name",children:Object(l.jsxs)("h2",{children:[n.name," Board"]})})]})},y=e(13),A=e.n(y);var M=function(t,n){var e={},r=t.length;return t.forEach((function(t){return e[t]=1})),{hit:function(t){e[t]=0},isSunk:function(){return Object.values(e).every((function(t){return 0===t}))},getPositions:function(){return t},getOrientation:function(){return n},getPositionsHealth:function(){return e},getLength:function(){return r},positions:t,orientation:n,length:r,positionsHealth:e}};var P,S,E=function(){for(var t=[],n=[],e=0;e<100;e++)t.push(void 0);var r=function(n){return"hit"===t[n]},a=function(n){return"miss"===t[n]};return{boardValues:t,ships:n,isPositionAttacked:function(t){return r(t)||a(t)},isPositionHit:r,isPositionMiss:a,placeAllShips:function(e){e.forEach((function(e,r){n.push(e),function(n,e){e.every((function(n){return void 0===t[n]}))?e.forEach((function(e){return t[e]=n})):console.log("one or more positions are occupied")}(r,e.positions)}))},updateShip:function(e,r,a){r.forEach((function(n){return t[n]=void 0})),n.forEach((function(t){return console.log(t.getPositions())})),n[e]=M(a),n.forEach((function(t){return console.log(t.getPositions())})),a.forEach((function(n){return t[n]=e}))},receiveAttack:function(e){if(void 0===t[e])t[e]="miss";else if("miss"!==t[e]&&"hit"!==t[e]){var r=t[e];n[r].hit(e),t[e]="hit"}},areAllShipsSunk:function(){return n.every((function(t){return t.isSunk()}))}}},N=["vertical","horizontal"];function w(t,n,e,r){return!t.includes(n)&&("horizontal"===r?function(t,n,e){if(n+e-1>=10*(Math.floor(n/10)+1))return!1;for(var r=0;r<e;r++)if(n++,t.includes(n))return!1;return!0}(t,n,e):function(t,n,e){if(n+10*(e-1)>n%10+90)return!1;for(var r=0;r<e;r++)if(n+=10,t.includes(n))return!1;return!0}(t,n,e))}function D(t,n,e){for(P=Math.floor(100*Math.random());!w(t,P,n,e);)P=Math.floor(100*Math.random());return P}var L=function(){for(var t=[],n=[],e=1;e<=5;e++){for(var r=(S=Math.floor(2*Math.random()),N[S]),a=[],o=D(t,e,r),i=0;i<e;i++)a.push(o),t.push(o),"vertical"===r?o+=10:o++;var c=M(a,r);n.push(c)}return n},V=A()("Player"),C=A()("Computer"),F=E(),H=E(),R=L(),T=L();F.placeAllShips(R),H.placeAllShips(T),V.board=F,V.ships=F.ships,C.board=H,C.ships=H.ships;for(var z=[],I=0;I<100;I++)z.push(void 0);var B=Object(r.createContext)(),J=function(t){var n,e=Object(r.useState)((n={},Object(c.a)(n,V.name,z),Object(c.a)(n,C.name,z),n)),a=Object(s.a)(e,2),o=a[0],i=a[1];return Object(l.jsx)(B.Provider,{value:[o,i],children:t.children})};function q(t,n,e){var r;switch(n){case"up":r=t-10;break;case"down":r=t+10;break;case"left":r=t-1;break;case"right":r=t+1;break;default:console.log("wrong value used for direction")}if(console.log(r),function(t,n,e){if(!(e<0||e>99)){if(("left"===n||"right"===n)&&Math.floor(t/10)!==Math.floor(e/10))return;return!0}}(t,n,r)){for(;e.isPositionHit(r);)r=q(r,n,e);if(e.isPositionMiss(r))return;return r}}function G(t){for(var n=Math.floor(100*Math.random());t.isPositionAttacked(n);)n=Math.floor(100*Math.random());return n}var K=function(){var t,n=["up","down","left","right"];return{getAttackPosition:function(e){if(t){for(var r=q(t,n[0],e);!r;){if(n.shift(),0===n.length)return t=void 0,n=["up","down","left","right"],G(e);r=q(t,n[0],e)}return r}return G(e)},updateMiss:function(){t&&(n.shift(),0===n.length&&(t=void 0,n=["up","down","left","right"]))},updateHits:function(n){t=n}}}(),Q=V;for(var U=function(){var t=Object(r.useContext)(B),n=Object(s.a)(t,2),e=n[0],a=n[1];function o(t,n,e){Q!==n&&(t.attack(n,e),t===C&&K.updateMiss(),n.board.areAllShipsSunk()&&t,Q=n,a((function(e){var r={};return r[t.name]=e[t.name],r[n.name]=n.board.boardValues.slice(),r})))}return console.log(e,a),Object(l.jsxs)("div",{className:"play-area",children:[Object(l.jsx)(k,{turn:Q,player:V,boardValues:e[V.name],ships:V.ships,playRound:null,dragFunctions:m}),Object(l.jsx)(k,{turn:Q,player:C,boardValues:e[C.name],ships:C.ships,playRound:function(t){var n=t.target.getAttribute("data-key");C.board.isPositionAttacked(n)||(o(V,C,n),console.log(Q),n=K.getAttackPosition(V.board),setTimeout((function(){return o(C,V,n)}),1e3),console.log(Q))},dragFunctions:null})]})},W=[],X=0;X<100;X++)W.push(void 0);var Y,Z,$=V;console.log(C.ships.forEach((function(t){return console.log(t.positions)})));var _=function(){var t,n=Object(r.useState)((t={},Object(c.a)(t,V.name,W),Object(c.a)(t,C.name,W),t)),e=Object(s.a)(n,2),a=e[0],o=e[1];function i(t,n,e){$!==n&&(t.attack(n,e),Y=n.board.isPositionHit(e),t===C&&(Y?K.updateHits(e):K.updateMiss()),n.board.areAllShipsSunk()&&(Z=t),$=n,o((function(e){var r={};return r[t.name]=e[t.name],r[n.name]=n.board.boardValues.slice(),r})))}return Object(l.jsxs)("main",{children:[Object(l.jsx)(d,{turn:$,opponent:$===V?C:V,winner:Z,attackResult:Y}),Object(l.jsx)(U,{player:V,computer:C,turn:$,boardValues:a,playRound:function(t){if(!Z){var n=t.target.getAttribute("data-key");C.board.isPositionAttacked(n)||(i(V,C,n),console.log($),n=K.getAttackPosition(V.board),setTimeout((function(){return i(C,V,n)}),1e3),console.log($))}}})]})},tt=e(12);var nt=function(){return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)("header",{className:"App-header",children:Object(l.jsx)("h1",{children:"Battleship"})}),Object(l.jsx)(_,{}),Object(l.jsxs)("footer",{children:[Object(l.jsx)("p",{children:"Made by Chandra."}),Object(l.jsxs)("p",{children:["Hosted with ",Object(l.jsx)(u.a,{icon:tt.a})," by github."]})]})]})},et=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,38)).then((function(n){var e=n.getCLS,r=n.getFID,a=n.getFCP,o=n.getLCP,i=n.getTTFB;e(t),r(t),a(t),o(t),i(t)}))};i.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(J,{children:Object(l.jsx)(nt,{})})}),document.getElementById("root")),et()}],[[37,1,2]]]);
//# sourceMappingURL=main.afb00ae4.chunk.js.map